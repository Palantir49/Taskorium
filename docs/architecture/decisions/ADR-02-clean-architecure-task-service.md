# ADR-002: Выбор чистой архитектуры для сервиса управления задачами и проектами

## Статус

Принято

Дата  
2025-12-12

## Участники

Все участники проекта

## Контекст

Сервис управления задачами и проектами является ядром системы Taskorium с критически важной бизнес-логикой. Основные
требования:

- Сложные бизнес-правила валидации и workflow задач

- Частые изменения в требованиях от продукт-менеджеров

- Необходимость долгосрочной поддерживаемости кода

- Независимость от инфраструктурных решений

- Высокие стандарты качества и тестируемости

- Интеграция с другими сервисами системы

- Традиционные подходы к архитектуре не обеспечивают достаточной гибкости и поддерживаемости для столь сложного домена.

## Рассмотренные варианты

### Вариант 1: Традиционная N-слойная архитектура

Описание: Классическое разделение на слои Controller → Service → Repository.

Плюсы:

✅ Простота и понятность для начинающих

✅ Быстрый старт разработки

✅ Множество примеров в .NET экосистеме

Минусы:

❌ Смешение ответственности в сервисных классах

❌ Зависимость бизнес-логики от инфраструктуры

❌ Сложность изоляции и тестирования доменных правил

❌ Высокая связанность кода

### Вариант 2: Чистая архитектура (Clean Architecture)

Описание: Архитектурный подход Роберта Мартина с разделением на доменный слой, use cases и внешние адаптеры.

Плюсы:

✅ Полная независимость бизнес-логики от фреймворков

✅ Легкость тестирования доменных правил

✅ Гибкость для частых изменений требований

✅ Ясное разделение ответственности

✅ Долгосрочная поддерживаемость

Минусы:

❌ Более высокая начальная сложность

❌ Больше шаблонного кода

❌ Требует дисциплины от разработчиков

## Решение

**Выбран Вариант 2: Чистая архитектура.**

Обоснование:

- Сложный и изменчивый домен: Управление задачами имеет сложные бизнес-правила, которые будут часто меняться. Чистая
  архитектура позволяет изолировать эти правила в доменном слое, делая изменения безопасными и предсказуемыми.

- Долгосрочная поддерживаемость: Проект рассчитан на длительную разработку и эволюцию. Принцип зависимостей,
  направленный
  внутрь (Dependency Rule), обеспечивает, что изменения во внешних слоях (база данных, API, UI) не затрагивают
  бизнес-логику.

- Тестируемость: Доменный слой может быть полностью покрыт юнит-тестами без моков инфраструктуры. Use cases тестируются
  с
  mock-репозиториями.

- Независимость от технологий: Возможность менять базу данных, фреймворки или внешние сервисы без переписывания
  бизнес-логики.

- Следование принципам SOLID: Чистая архитектура естественным образом приводит к соблюдению принципов SOLID, особенно
  Single Responsibility и Dependency Inversion.