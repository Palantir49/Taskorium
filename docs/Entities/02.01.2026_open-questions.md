## ❓ Открытые вопросы

### шаблон
### Вопрос : 
- **Контекст**: 
- **Зачем решать**: 
- **Варианты**:
    - **1** — 
    - **2** —  
- **Влияние**:  
    - **1** - 

### Вопрос 1: Можно ли завершать задачу без входа «в работу»?
- **Контекст**: Сейчас разрешён переход `InProgress → Terminal` (например, `В работе → Завершена`).  
- **Зачем решать**: Если запрещать, то это ограничение пользователя, если разрешить - возможно несоответствие дат
- **Варианты**:
    - **Разрешить без изменения дат** — изменение статуса никак не привязано к типу, но при перемещении `Initial → Terminal` оставляет `StartDate = null`
    - **Разрешить с присвоением дат** — изменение статуса никак не привязано к типу, но при перемещении `Initial → Terminal` присваивает `StartDate = now`
    >:warning: возможны проблемы в аналитике
    - **Запретить** — Ограничивает пользователя, принуждая следовать `Initial → InProgress → Terminal`, но даты сохраняют свою актуальность
- **Влияние**:  
    - Если разрешить с изменением дат - при изменении статуса на `Terminal` **и** `StartDate = null` → `StartDate = now`
    - Если запретить → добавить валидацию в методе изменения статуса на проверку последовательности `OInitialpen → InProgress → Terminal`

    ### Вопрос 2: Как даты начала и завершения задачи должны реагировать на изменение типа?
- **Контекст**: Сейчас при переходе из `Initial → InProgress` изменяется `StartDate = now`, а при `InProgress → Terminal` `DueDate = now`
- **Зачем решать**: Выработать поведение дат при возможном "откате" статуса
- **Варианты**:
    - **Присваивать null при "откате"** — сохраняет естественный порядок перехода между типами статусов 
    - **Присваивать null при "откате" при явном обозначении** — пользователь сам определяет изменение дат при "откате"
    - **Не изменять даты** — сохранение первичных присвоенных значений  
- **Влияние**:  
    - **Присваивать null при "откате"** - при "откате" типа статуса из `Terminal` → `DueDate = null`. При откате в `Initial` → `StartDate = null`
    - **Присваивать null при "откате" при явном обозначении** — если указано обнуление, то действовать как при **Присваивать null при "откате"**, иначе не изменять даты
    - **Не изменять даты** - если `DueDate` или `StartDate` присвоено значение - не изменять.

    ### Вопрос 3: Как присваивается статус при создании новой задачи
- **Контекст**: Сейчас при создании задачи можно указать любой id (в планах изменить на указание id статуса, который принадлежит проекту)
- **Зачем решать**: Выработать поведение дат при возможном "откате" статуса
- **Варианты**:
    - **Добавить к статусам обозначение "первичный"** — при создании задачи искать первичный статус и присваивать его
    - **Присваивать переданный статус** — присваивать id переданого стаутса
- **Влияние**:
    - **Добавить к статусам обозначение "первичный"** — при создании задачи получить статус, принадлежащий проекту, с пометкой "первичный" и присвоить его id
    - **Присваивать переданный статус** — проверить что статус принадлежит проекту и присвоить его id

### Вопрос 4: Разрешить изменение `ProjectId` и `Type`, если статус не используется?
- **Контекст**: Сейчас `ProjectId` и `Type` полностью неизменяемы. Но если статус *никем не используется* (создан и забыт), может быть полезно его «переназначить», а не удалять и создавать заново.  
- **Варианты**:  
    - **Разрешить**, если `количество_задач = 0`. Требует проверки при обновлении.  
    - **Запретить** — проще, безопаснее, соответствует принципу «immutable by default».
- **Влияние**:
    - **разрешить** → нужены методы изменения ProjectId и Type с предусловием.
    - **Запретить** → UI всегда предлагает «удалить + создать»

### Вопрос 5: Как обеспечить наличие `Initial`, `InProgress` и `Terminal` при создании проекта?
- **Контекст**: Без наличия статусов каждого типа нарушается логика работы 'Issue'
- **Варианты**:  
    - **Дефолтные статусы** - Автоматически создавать 3 статуса при создании проекта: `"Открыта" (Initial)`, `"В работе" (InProgress)` и `«Завершена» (Terminal)`.  
    - **Создание статусов при создании проекта** Требовать передачи базового набора статусов при создании проекта.
        - **Обработка в UI** - При создании проекта автоматически заполнять 3 поля статусов. Добавить возможность сразу создать нужные статусы и настроить их.
- **Влияние**
    - **Дефолтные статусы** - добавить создание статусов при создании проекта
    - **Создание статусов при создании проекта** - требует создания статусов с задаными параметрами и проверкой на наличие всех типов.

### Вопрос 6: Нужно ли поддерживать «клонирование» набора статусов между проектами?
- **Контекст**: Пользователи часто хотят повторить workflow из одного проекта в другом.  
- **Решение**:  
  - Предоставить API `POST /projects/{id}/statuses/clone-from/{sourceId}` — создаёт *новые* статусы с теми же `Name`, `Position`, `Type`, но новыми `Id` и `ProjectId = id`.  
- **Плюс**: Не нарушает `INV-001`, сохраняет целостность.